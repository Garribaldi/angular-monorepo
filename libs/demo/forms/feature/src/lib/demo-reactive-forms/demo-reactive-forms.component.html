<div *ngIf="employee$ | async" class="form">

  <form [formGroup]="testForm" (ngSubmit)="onSubmit()" data-cy="reactive-form">
    <mat-form-field appearance="fill">
      <mat-label>First Name</mat-label>
      <input matInput formControlName="firstName">
      <mat-error>Please enter your first name.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Last Name</mat-label>
      <input matInput formControlName="lastName">
      <mat-error>Please enter your last name.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>eMail</mat-label>
      <input matInput formControlName="email">
      <mat-error>Please enter a valid eMail.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Password</mat-label>
      <input matInput formControlName="password" type="password">
      <mat-error>
        <ng-container *ngIf="testForm.get('password') as form">
          <ul class="form__error-list">
            <li *ngIf="form.hasError('required')">Please enter a password.</li>
            <li *ngIf="form.hasError('minlength')">Your password must be at least 8 characters long.</li>
            <li *ngIf="form.hasError('passwordStrength')">Your password must have lower case, upper case and numeric or special characters.</li>
          </ul>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>City</mat-label>
      <mat-select formControlName="city">
        <mat-option *ngFor="let city of (cities$ | async)" [value]="city.name">{{city.name}}</mat-option>
      </mat-select>
      <mat-error>Please choose a city.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Country</mat-label>
      <mat-select formControlName="country">
        <mat-option *ngFor="let country of (countries$ | async)" [value]="country.iso">{{country.name}}</mat-option>
      </mat-select>
      <mat-error>Please choose a country.</mat-error>
    </mat-form-field>

    <button mat-flat-button color="primary" type="submit" [disabled]="!testForm.valid">Send</button>

    <div class="debug">Model: {{testForm.value | json}}</div>
  </form>

</div>
